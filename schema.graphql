type Slicer @entity {
  id: ID!
  address: Bytes!
  slices: BigInt!
  minimumSlices: BigInt!
  totalReceived: BigInt!
  creator: Payee!
  payees: [PayeeSlicer]! @derivedFrom(field: "slicer")
  products: [Product]! @derivedFrom(field: "slicer")
  childrenSlicers: [Slicer]! # TBD!
  createdAtTimestamp: BigInt!
  # contentURI: String!
  # metadataURI: String!
}

type Payee @entity {
  id: ID!
  slc: BigInt
  slicers: [PayeeSlicer]! @derivedFrom(field: "payee")
  created: [Slicer]! @derivedFrom(field: "creator")
}

type PayeeSlicer @entity {
  id: ID!
  payee: Payee!
  slicer: Slicer!
  slices: BigInt!
  released: BigInt
  purchases: [ProductPurchase]! @derivedFrom(field: "buyer") # TBD!
}

type Product @entity {
  id: ID!
  slicer: Slicer!
  categoryIndex: BigInt!
  price: BigInt!
  isUSD: Boolean!
  isInfinite: Boolean!
  isMultiple: Boolean!
  availableUnits: BigInt!
  creator: Bytes!
  data: Bytes!
}

# TBD!
type ProductPurchase @entity {
  id: ID!
  buyer: PayeeSlicer!
  quantity: BigInt!
}

# TODO
# retrieve IDs of the slicers a Payee has purchased from
# retrieve IDs of the products a Payee has purchased from a slicer
