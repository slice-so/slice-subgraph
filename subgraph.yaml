specVersion: 0.0.4
description: The decentralized slicing protocol
repository: https://github.com/slice-so/slice-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: SliceCore
    # network: mainnet
    network: rinkeby
    source:
      # address: "" # Mainnet
      # startBlock: 13346238 # Mainnet
      # address: "" # Rinkeby
      # startBlock: 9499451 # Rinkeby
      # address: "" # Rinkeby (dev)
      # startBlock: 9894702 # Rinkeby (dev)
      abi: SliceCore
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Slicer
        - Payee
        - PayeeSlicer
      abis:
        - name: SliceCore
          file: ./abis/SliceCore.json
      eventHandlers:
        - event: TokenSliced(indexed address,indexed uint256,(address,uint32)[],uint256,address[],uint256,uint256,bool,bool,indexed uint256)
          handler: handleTokenSliced
        - event: TokenResliced(indexed uint256,address[],int32[])
          handler: handleTokenResliced
        - event: SlicerControllerSet(indexed uint256,indexed address)
          handler: handleSlicerControllerSet
        - event: RoyaltySet(indexed uint256,bool,bool,uint256)
          handler: handleRoyaltySet
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleTransferSingle
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleTransferBatch
      file: ./src/mappings/sliceCore.ts
  - kind: ethereum/contract
    name: ProductsModule
    # network: mainnet
    network: rinkeby
    source:
      # address: "" # Mainnet
      # startBlock: 13346238 # Mainnet
      # address: "" # Rinkeby
      # startBlock: 9499451 # Rinkeby
      # address: "" # Rinkeby (dev)
      # startBlock: 9894702 # Rinkeby (dev)
      abi: ProductsModule
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Slicer
        - Payee
        - PayeeSlicer
        - Product
        - ProductPurchase
      abis:
        - name: ProductsModule
          file: ./abis/ProductsModule.json
      eventHandlers:
        - event: ProductAdded(indexed uint256,indexed uint256,indexed uint256,bool,bool,bool,uint256,address,bytes,(uint128,uint32)[],(uint248,bool,address)[],(bytes,uint256,address,bytes4,bytes4))
          handler: handleProductAdded
        - event: ProductInfoChanged(indexed uint256,indexed uint256,bool,bool,uint256,(uint248,bool,address)[])
          handler: handleProductInfoChanged
        - event: ProductRemoved(indexed uint256,indexed uint256)
          handler: handleProductRemoved
        - event: ProductPaid(indexed uint256,indexed uint256,uint256,indexed address,address,uint256,uint256)
          handler: handleProductPaid
        - event: ReleasedToSlicer(indexed uint256,uint256)
          handler: handleReleasedToSlicer
        - event: ERC721ListingChanged(indexed uint256,indexed address,indexed uint256,bool)
          handler: handleERC721ListingChanged
        - event: ERC1155ListingChanged(indexed uint256,indexed address,indexed uint256,uint256)
          handler: handleERC1155ListingChanged
      file: ./src/mappings/productsModule.ts
  - kind: ethereum/contract
    name: FundsModule
    # network: mainnet
    network: rinkeby
    source:
      # address: "" # Mainnet
      # startBlock: 13346238 # Mainnet
      # address: "" # Rinkeby
      # startBlock: 9499451 # Rinkeby
      # address: "" # Rinkeby (dev)
      # startBlock: 9894702 # Rinkeby (dev)
      abi: FundsModule
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Slicer
        - Payee
        - PayeeSlicer
        - Product
        - ProductPurchase
      abis:
        - name: FundsModule
          file: ./abis/FundsModule.json
      eventHandlers:
        - event: Deposited(indexed address,indexed address,uint256,uint256)
          handler: handleDeposited
        - event: Withdrawn(indexed address,indexed address,uint256,uint256)
          handler: handleWithdrawn
      file: ./src/mappings/fundsModule.ts
templates:
  - kind: ethereum/contract
    name: Slicer
    # network: mainnet
    network: rinkeby
    source:
      abi: Slicer
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Slicer
        - PayeeSlicer
      abis:
        - name: Slicer
          file: ./abis/Slicer.json
      eventHandlers:
        - event: Released(indexed address,indexed address,uint256,uint256)
          handler: handleReleased
        - event: CurrenciesAdded(address[])
          handler: handleCurrenciesAdded
        - event: ChildSlicerSet(indexed uint256,bool)
          handler: handleChildSlicerSet
        - event: CustomFeeSet(bool,uint256)
          handler: handleCustomFeeSet
        - event: PaymentReceived(indexed address,uint256)
          handler: handlePaymentReceived
        - event: ERC721Received(indexed address,indexed address,uint256)
          handler: handleERC721Received
        - event: ERC1155Received(indexed address,indexed address,uint256,uint256)
          handler: handleERC1155Received
        - event: ERC1155BatchReceived(indexed address,indexed address,uint256[],uint256[])
          handler: handleERC1155BatchReceived
      file: ./src/mappings/slicer.ts
