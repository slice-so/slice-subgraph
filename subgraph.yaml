specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Slice
    network: rinkeby
    source:
      address: "0xC7e7B60EE5b54d3C41CA4e556Ba410d88A66Fa9D"
      abi: Slice
      startBlock: 9114205
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Slicer
        - Payee
        - PayeeSlicer
      abis:
        - name: Slice
          file: ./abis/Slice.json
      eventHandlers:
        - event: TokenSliced(address,uint256,indexed address[],uint256[],uint256)
          handler: handleTokenSliced
        - event: ProductsPaid(indexed address[],indexed uint32[],uint16[],uint256)
          handler: handleProductsPaid
      file: ./src/mappings/slice.ts
  - kind: ethereum/contract
    name: SliceCore
    network: rinkeby
    source:
      address: "0x9F64d99F1365C7565C406D40B693f9b9bF3E0343"
      abi: SliceCore
      startBlock: 9114200
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Payee
        - PayeeSlicer
      abis:
        - name: SliceCore
          file: ./abis/SliceCore.json
      eventHandlers:
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleTransferSingle
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleTransferBatch
      file: ./src/mappings/sliceCore.ts
  - kind: ethereum/contract
    name: SLC
    network: rinkeby
    source:
      address: "0x0827D84FE2bcAFb9286103157c090E47fa4e3F78"
      abi: SLC
      startBlock: 9114202
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Payee
      abis:
        - name: SLC
          file: ./abis/SLC.json
      eventHandlers:
        - event: MintedSLC(indexed address,uint256)
          handler: handleMintedSLC
        - event: MintTriggered(indexed address,uint256,indexed address,uint8)
          handler: handleMintTriggered
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/mappings/slc.ts
templates:
  - kind: ethereum/contract
    name: Slicer
    network: rinkeby
    source:
      abi: Slicer
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - PaymentReceived
        - TriggeredRelease
        - SLCPaid
        - AddedChildrenSlicer
        - ProductAdded
        - ProductInfoChanged
        - ProductCurrencyChanged
        - ProductCategoryChanged
        - ProductRemoved
        - ProductPaid
      abis:
        - name: Slicer
          file: ./abis/Slicer.json
      eventHandlers:
        - event: PaymentReceived(indexed address,uint256)
          handler: handlePaymentReceived
        - event: TriggeredRelease(indexed address,uint256)
          handler: handleTriggeredSlicerRelease
        - event: SLCPaid(uint32[],uint16[],uint256)
          handler: handleSLCPaid
        - event: AddedChildrenSlicer(indexed uint256)
          handler: handleAddedChildrenSlicer
        - event: ProductAdded(indexed uint32,indexed uint32,uint256,bool,bool,bool,uint32,indexed address,bytes)
          handler: handleProductAdded
        - event: ProductInfoChanged(indexed uint32,bool,uint32,uint256)
          handler: handleProductInfoChanged
        - event: ProductCurrencyChanged(indexed uint32,uint256,bool)
          handler: handleProductCurrencyChanged
        - event: ProductCategoryChanged(indexed uint32,uint32)
          handler: handleProductCategoryChanged
        - event: ProductRemoved(indexed uint32)
          handler: handleProductRemoved
        - event: ProductPaid(indexed address,indexed uint32,uint16,uint256)
          handler: handleProductPaid
      file: ./src/mappings/slicer.ts
